
clear 
clc
%% MAFIA
%Beginning statements 
numOfPlayers = input('Enter number of players: ');
while numOfPlayers < 4 
    fprintf('Number of players must be greater than or equal to four.\n')
    numOfPlayers = input('Enter number of players: ');
end

Name = [];
for i = 1:numOfPlayers
    enteredName = false;
    while ~enteredName
        fprintf('Enter player #%i''s name: ', i);
        userInput = input('', 's');   
        if ~ismember(userInput, Name)
            Name{i} = userInput;
            enteredName = true;
        else
            fprintf('Names must be unique.\n')
        end
    end
end                                                          
Player(i) = Name(i); %Stores Name index in a Player index 
%Assigning Roles: 
Roles = [0 0 0 0]; %initializing the array
for i = 1:3
    Roles(i) = i;
end
for i = 4:numOfPlayers
    Roles(i) = 4;
end
Roles = Roles(randperm(length(Roles))); %TEST: Good
for i = 1:numOfPlayers %Finds out the roles 
     if Roles(i) == 1
        MafiaIndex = i;
     end
     if Roles(i) == 2
        DocIndex = i;
     end
     if Roles(i) == 3
        DetectiveIndex = i;
     end
end
%Day time 
gameOver = false; %Change when Mafia is voted or there are only two players left.
day = true;
numPlayersLeft = numOfPlayers;
Round = 1;
NightRound = 1;
oldLengthPlayersKilled=0;
chosenPlayersSaved = 0;
playersKilled = 0;
while ~gameOver %While NOT game over 
 if day  %DAY TIME: Daytime description goes here 
    continue0 = false;
    while ~continue0
     if Round == 1 %% No deaths occur on day one
        fprintf('Today is day 1. No voting will occur today.\nPrepare. The Mafia strikes tonight.\n')
        ContInput1 = input('Type "c" to continue.\n');
        if ContInput1 == 'c'
            continue0 = true;
        else 
            continue0 = false;
        end
     elseif 
     fprintf('Today is day %i.\n', Round) 
     fprintf('Last night, the Mafia came.\n')
     if oldLengthPlayersKilled ~= length(playersKilled) && ~chosenPlayerSaved %Updated in Night
         fprintf('1 player died.')
         oldLengthPlayersKilled = length(playersKilled);
     else       
         fprintf('Nobody died.')
     end
         
    end   
    end
 else %night
    k = 1;
    continue1 = false;
    while ~continue1
    for i = 1:numOfPlayers 
        fprintf('It''s player %i''s turn. Type "c" to continue.\n', i)
        ContInput2 = input('', 's');
        if ContInput2 == 'c'
            continue1 = true;
        else
            continue1 = false;
        end
    end
     while continue1
        if Roles(i) == 1
            fprintf('Who would you like to kill?\n') 
            chosenPlayerKilled = input('','s');
            playersKilled = playersKilled + 1;
        elseif Roles(i) == 2
                fprintf('Who would you like to save?\n')
                chosePlayerSaved = input('', 's');
        elseif Roles(i) == 3
                fprintf('Who would you like to investigate?')
            else 
                fprintf('Who do you think is in the Mafia?') 
        end
                continue1 = false;
      end
    end
    %Ask players given prompts based on their roles 
    % (is user civilian, mafia, doctor, or detective? 
    % Mafia = 1, Doctor = 2, Detective = 3, Civilian = 4
    NightRound = NightRound + 1;  
 end
 day = ~day;
 Round = Round + 1; %One round is day + night
end





